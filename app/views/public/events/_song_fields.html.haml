.nested-fields{ data: { id: f.object.id } }
  = f.hidden_field :position, class: 'song-position', value: (f.object.try(:position) || '')
  = f.hidden_field :event_id, value: f.object.event_id
  .song-layout
    .song-header
      %span.drag-handle ⇅
      %button.btn.btn-sm.btn-outline-info.ml-2#drag-help-btn{ type: "button", data: { toggle: "popover", html: true, content: "上下にドラッグすると曲の順番を並べ替えできます。", placement: "left" } }
        ?
    .field
      = f.text_field :song_name, placeholder: "楽曲名"
    .field
      = f.text_field :youtube_url, placeholder: "Youtubeの動画URL"
    .field
      = f.text_area :introduction, placeholder: "楽曲の紹介文（意気込みや想いなど）", rows: 3, class: "form-control"
    .field
      = link_to_remove_association '曲を削除', f, class: 'btn btn-danger js-song-remove-btn', data: { 'turbolinks': false, confirm: 'こちらの曲を削除します。よろしいですか？' }
    #join_parts.join-part-layout
      = f.fields_for :join_parts, id: 'js-join-part-field' do |join_part|
        .field
          = render 'public/events/join_part_fields', f: join_part
      .links
        = link_to_add_association 'パートを追加', f, :join_parts,
          class: 'btn btn-success js-add-join-part-field-btn',
          data: { 'turbolinks': false }
