= render 'layouts/header_menu'

.activity-index-head-title
  %h2 ã¿ã‚“ãªã®æ´»å‹•å ±å‘Šä¸€è¦§
  = link_to "æ´»å‹•å ±å‘Šã‚’ã™ã‚‹ï¼", new_public_activity_path, data: { 'turbolinks': false }, class: "btn btn-info activity-index-create-btn"
.activity-index-container
  - if @activities.present?
    - @activities.each do |activity|
      .card.mb-5
        = link_to public_activity_path(activity), data: { 'turbolinks': false } do
          .img-container
            - if activity.activity_image.present?
              = image_tag activity.activity_image
            - else
              = image_tag 'no_image'
        .card-body.text-container
          %h5.card-title#title-js
            - if activity.title.length > 20
              .title-truncated
                = link_to activity.title.truncate(20), public_activity_path(activity), data: { 'turbolinks': false }
                %p.text-red.title-see-more ã‚‚ã£ã¨è¦‹ã‚‹
              .title-untruncated.hide
                = link_to activity.title, public_activity_path(activity), data: { 'turbolinks': false }
            - else
              = link_to activity.title, public_activity_path(activity), data: { 'turbolinks': false }
          %h6.card-subtitle#kpt
            %span.kpt-keep Keep
            - if activity.keep.length > 27
              .keep-truncated
                = activity.keep.truncate(27)
                %p.text-red.keep-right.cursor-pointer.keep-see-more ã‚‚ã£ã¨è¦‹ã‚‹
              .keep-untruncated.hide
                = activity.keep
            - else
              = activity.keep
              %br
              %br
            %span.kpt-problem Problem
            - if activity.problem.length > 27
              .problem-truncated
                = activity.problem.truncate(27)
                %p.text-red.keep-right.cursor-pointer.problem-see-more ã‚‚ã£ã¨è¦‹ã‚‹
              .problem-untruncated.hide
                = activity.problem
            - else
              = activity.problem
              %br
              %br
            %span.kpt-try Try
            - if activity.try.length > 27
              .try-truncated
                = activity.try.truncate(27)
                %p.text-red.keep-right.cursor-pointer.try-see-more ã‚‚ã£ã¨è¦‹ã‚‹
              .try-untruncated.hide
                = activity.try
            - else
              = activity.try
              %br
              %br
          %hr
          .activity-show-link-area
            = link_to "æ´»å‹•å ±å‘Šè©³ç´°ã¸", public_activity_path(activity), class: "btn-info activity-show-link", data: { 'turbolinks': false }
          - if activity.customer_id == current_customer.id
            %hr
            .activity-action-btn
              = link_to 'ç·¨é›†ã™ã‚‹', edit_public_activity_path(activity), data: { 'turbolinks': false }, class: "btn btn-success"
              = link_to 'å‰Šé™¤ã™ã‚‹', public_activity_path(activity), method: :delete, data: { 'turbolinks': false }, class: "btn btn-danger"
          %hr
          %p.card-text
            [æŠ•ç¨¿è€…]
            = activity.customer.name
            %hr
            [æ‰€å±ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£]
            %br
            - if activity.customer.communities.present?
              - activity.customer.communities.each do |community|
                %span ğŸµ
                = community.name
                %br
            - else
              æ‰€å±ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
  - else
    ã¾ã æŠ•ç¨¿è¨˜äº‹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚