= render 'layouts/header_menu'

.activity-show-title
  %h2 æ´»å‹•å ±å‘Šè©³ç´°ãƒšãƒ¼ã‚¸
  .activity-show-follow
    - if @activity.customer_id == current_customer.id
      = link_to 'ç·¨é›†ã™ã‚‹', edit_public_activity_path(@activity), data: { 'turbolinks': false }, class: "btn btn-success"
      = link_to 'å‰Šé™¤ã™ã‚‹', public_activity_path(@activity), method: :delete, data: { 'turbolinks': false, confirm: 'ã“ã¡ã‚‰ã®æ´»å‹•å ±å‘Šã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ' }, class: "btn btn-danger"
    - elsif @activity.favorited?(current_customer)
      = link_to public_activity_favorites_path(@activity.id), method: :delete, class: "favorite-btn" do
        %i.fa-solid.fa-heart
        .favorite-count
          = @activity.favorites.count
    - else
      = link_to public_activity_favorites_path(@activity.id), method: :post, class: "favorite-btn" do
        ã„ã„ã­
        %i.fa-regular.fa-heart
        .favorite-count
          = @activity.favorites.count

.activity-show-container.px-0.px-sm-0
  .row
    .col-md-3
      .activity-show-card
        .card
          .img-container
            - if @activity.activity_image.present?
              = image_tag @activity.activity_image
            - else
              = image_tag 'no_image'
          .card-body.text-container
            %h5.card-title
              = @activity.title
            %hr
            %h6.card-subtitle
              [æŠ•ç¨¿è€…]
              %br
              .activity-owner-img
                - if @activity.customer.profile_image.present?
                  = image_tag @activity.customer.profile_image
                - else
                  = image_tag 'no_image'
                .activity-name
                  = @activity.customer.name
            %hr
            %p.card-text
              - if @activity.customer_id == current_customer.id
                = link_to 'ç·¨é›†ã™ã‚‹', edit_public_activity_path(@activity), data: { 'turbolinks': false }, class: "btn btn-success"
                = link_to 'å‰Šé™¤ã™ã‚‹', public_activity_path(@activity), method: :delete, data: { 'turbolinks': false, confirm: 'ã“ã¡ã‚‰ã®æ´»å‹•å ±å‘Šã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ' }, class: "btn btn-danger"
              - elsif @activity.favorited?(current_customer)
                = link_to public_activity_favorites_path(@activity.id), method: :delete, class: "favorite-btn" do
                  %i.fa-solid.fa-heart
                  = @activity.favorites.count
              - else
                = link_to public_activity_favorites_path(@activity.id), method: :post, class: "favorite-btn" do
                  ã„ã„ã­
                  %i.fa-regular.fa-heart
                  = @activity.favorites.count

    .col-md-9
      %table.table.table-striped.activity-show-table{:width=>"100%",:border=>"1"}
        %colgroup
          %col{width: "19%"}
          %col{width: "81%"}
            %tr
              %th{scope:"row"} æ´»å‹•å ±å‘Šã‚¿ã‚¤ãƒˆãƒ«
              %td
                = @activity.title
            %tr
              %th{scope:"row"} æ´»å‹•å ±å‘Šå‹•ç”»
              %td
                - if @activity.youtube_url.present?
                  %iframe{
                    src: "https://www.youtube.com/embed/#{@activity.youtube_url[32..42]}",
                    allow: "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",
                    allowfullscreen: "",
                    frameborder: "0",
                    height: "315",
                    width: "560"
                  }
                - else
                  æŠ•ç¨¿ã•ã‚ŒãŸå‹•ç”»ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
            %tr
              %th{scope:"row"} ã‚„ã£ã¦è‰¯ã‹ã£ãŸäº‹
              %td
                %span.kpt-keep Keep
                = @activity.keep
            %tr
              %th{scope:"row"} å¤±æ•—ã—ãŸäº‹
              %td
                %span.kpt-problem Problem
                = @activity.problem
            %tr
              %th{scope:"row"} æ¬¡æŒ‘æˆ¦ã—ãŸã„äº‹
              %td
                %span.kpt-try Try
                = @activity.try
            %tr
              %th{scope:"row"} æ´»å‹•å ±å‘Šè©³ç´°ç´¹ä»‹
              %td
                = simple_format(@activity.introduction)
            %tr
              %th{scope:"row"} æ‰€å±ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
              %td
                - if @activity.customer.communities.present?
                  - @activity.customer.communities.each do |community|
                    %span ğŸµ
                    = community.name
                    %br
                - else
                  æ‰€å±ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
